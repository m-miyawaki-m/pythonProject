以下に内容を簡潔に整理しました。

---

### **MyBatis XML 解析の手順と要件整理**

---

### **1. 解析対象の特定**

1. **対象 XML ファイルのリストアップ**

   - プロジェクト内の Mapper XML ファイルをすべてリストアップ。
   - ファイル名やパスの一覧を作成。

2. **解析範囲の決定**
   - 対象タグの決定：
     - `<select>`, `<insert>`, `<update>`, `<delete>`
     - `<sql>`（共通 SQL）
     - `<include>`（外部 SQL のインクルード）

---

### **2. SQL 文の解析**

1. **静的 SQL の解析**

   - FROM 句や JOIN 句から使用テーブルを特定。
   - SELECT 句や WHERE 句から使用カラムを特定。

   **例:**

   - SQL 文：`SELECT col1, col2 FROM table_name`
   - 利用テーブル：`table_name`
   - 利用カラム：`col1`, `col2`

2. **動的 SQL の解析**
   - `<if>`, `<choose>`, `<foreach>` などの動的タグを解析。
   - 条件によるテーブル・カラムの使用を整理。

---

### **3. WHERE 句の条件解析**

1. **パラメータ解析**

   - SQL 内の`#{param}`や`${param}`形式のパラメータを抽出。
   - Java 側の`parameterType`や変数名を特定。

   **例:**

   - WHERE 句：`WHERE col1 = #{param1}`
     - パラメータ：`param1`
     - 利用カラム：`col1`

2. **動的条件の解析**
   - `<if>`や`<where>`による条件式を確認。
   - 条件ごとの使用カラムを整理。

---

### **4. 外部 SQL の解析**

1. **<include>タグの展開**

   - `<include refid="sqlId">`を解析。
   - 参照する`<sql>`タグの内容を統合し解析。

2. **<sql>タグの解析**
   - 共通部分（例：カラムリスト、WHERE 条件）を抽出。
   - 各 SQL に展開して反映。

---

### **5. 利用テーブル・カラム・パラメータの整理**

1. **利用テーブル一覧**

   - 各 SQL 文で利用されるテーブルを整理。
   - 重複を統合し、全体のリストを作成。

2. **利用カラム一覧**

   - 各 SQL 文で使用されるカラムを整理。
   - SELECT 句や WHERE 句に基づき一覧化。

3. **条件式に関連するパラメータ一覧**
   - Java 側から渡されるパラメータと、それが影響するカラム・条件をリストアップ。

---

### **6. 補足（考慮すべきポイント）**

1. **SQL の結合やサブクエリ**

   - JOIN で関連するテーブルや、サブクエリ内のカラムを漏れなく整理。

2. **動的 SQL による影響範囲**

   - 将来的な変更の影響範囲を明確化。

3. **重複コードの整理**
   - `<sql>`タグやインクルードされたコードの再利用部分を特定。

---

### **7. ドキュメント化**

1. **解析結果のレポート**

   - 利用テーブル・カラム一覧、条件式とパラメータ一覧をまとめたレポート作成。
   - テーブル利用頻度や動的条件の詳細を追記（必要に応じて）。

2. **要件定義への活用**
   - ドキュメントを基に要件定義を行い、関係者と共有。

---

### **タスク優先度**

1. **優先度高**

   - 静的 SQL の解析
   - 利用テーブル・カラムの抽出

2. **優先度中**

   - 動的 SQL 解析
   - Java パラメータの影響箇所確認

3. **優先度低**
   - 外部 SQL（<sql>, <include>）の展開・詳細分析

---

この整理に基づき、効率的な MyBatis XML ファイルの解析と要件定義が可能になります。
